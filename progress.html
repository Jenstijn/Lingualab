<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>LinguaLab ‚Äî Voortgang</title>
  <meta name="theme-color" content="#0b1021">
  <link rel="stylesheet" href="./ll-brazil-ipad-v2.css">
  <style>
    *,*::before,*::after{box-sizing:border-box}
    :root{--bg:#0c0e10;--panel:rgba(255,255,255,.08);--panel2:rgba(255,255,255,.12);--text:#e8ecf1;--muted:#a8b0ba;--hair:1px solid rgba(255,255,255,.14)}
    @media (prefers-color-scheme:light){:root{--bg:#f6f7fb;--panel:rgba(255,255,255,.65);--panel2:rgba(255,255,255,.8);--text:#0b1520;--muted:#536070;--hair:1px solid rgba(0,0,0,.08)}}
    .wrap{max-width:920px;margin:0 auto;padding:16px}
    .panel{background:var(--panel);border:var(--hair);border-radius:16px;padding:14px;backdrop-filter:blur(18px) saturate(130%);box-shadow:0 10px 30px rgba(0,0,0,.25);margin-top:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{display:inline-flex;align-items:center;border:var(--hair);background:var(--panel2);padding:4px 10px;border-radius:999px;margin:2px}
    .small{font-size:12px;color:var(--muted)}
    canvas{width:100%; height:200px; background:rgba(255,255,255,.06); border-radius:12px}
  </style>
</head>
<body>
<div id="ll-header"></div>
<script src="./ll-nav.js" defer></script>
  <main class="wrap">
    <h2>Voortgang</h2>
    <section class="panel">
      <div id="nums" class="row"></div>
    </section>
    <section class="panel">
      <h3>Due-curve (simpele schatting)</h3>
      <canvas id="chart" width="700" height="220"></canvas>
      <div class="small">Indicatief: op basis van intervallen in je deck.</div>
    </section>
    <section class="panel">
      <a class="pill" href="today.html">‚¨ÖÔ∏é Vandaag</a>
      <a class="pill" href="train.html">Oefenmodus</a>
      <a class="pill" href="index.html">Vertalen</a>
    </section>
  </main>
<script src="./srs2.js"></script>
<script>
async function load(){
  const total = await LL_SRS.count();
  const due = (await LL_SRS.due(10000)).length;
  document.getElementById('nums').innerHTML = `<span class="pill">üìö Totaal: ${total}</span><span class="pill">‚è∞ Due: ${due}</span>`;

  // Build a naive due forecast for next 30 days based on card.int
  const dbDue = await LL_SRS.due(100000);
  const today = new Date(); today.setHours(0,0,0,0);
  const buckets = Array(30).fill(0);
  // fetch all cards by counting next due from now (not perfect without reading all cards; we approximate using due items as proxy)
  const ctx = document.getElementById('chart').getContext('2d');
  // If we had all cards, we'd compute due dates. For now just draw flat line based on current due.
  ctx.clearRect(0,0,700,220);
  ctx.beginPath();
  ctx.moveTo(0,200);
  const base = Math.min(200, 20 + due); // simple visualization
  for (let x=0; x<700; x+=20){ ctx.lineTo(x, 200 - base); }
  ctx.stroke();
}
load();
</script>
</body>
</html>
